local a={spaces=4,highlighting=false}local b=clonefunction;local c=string;local d=game;local e=b(c.sub)local f=b(c.format)local g=b(c.rep)local h=b(c.byte)local c=b(c.match)local d=b(d.GetFullName)local i=b(debug.getinfo)local j=math.huge;local k=b(typeof)local l=b(pairs)local m=b(assert)local n=b(tostring)local o=b(table.concat)local p=b(getmetatable)local q=b(rawget)local b=b(rawset)local r=g(" ",a.spaces or 4)local s;local t={Axes=true,BrickColor=true,CatalogSearchParams=true,CFrame=true,Color3=true,ColorSequence=true,ColorSequenceKeypoint=true,DateTime=true,DockWidgetPluginGuiInfo=true,Enum=true,Faces=true,Instance=true,NumberRange=true,NumberSequence=true,NumberSequenceKeypoint=true,OverlapParams=true,PathWaypoint=true,PhysicalProperties=true,Random=true,Ray=true,RaycastParams=true,RaycastResult=true,Rect=true,Region3=true,Region3int16=true,TweenInfo=true,UDim=true,UDim2=true,Vector2=true,Vector2int16=true,Vector3=true,Vector3int16=true}local function u(a)local c,d,e=p(a)if not c or k(c)~="table"then return n(a)end;e=q(c,"__tostring")b(c,"__tostring",nil)d=n(a)b(c,"__tostring",e)return d end;local function b(...)local a={}for b,b in l({...})do local c=k(b)local d=#a+1;if c=="string"then a[d]=f("\27[32m\"%s\"\27[0m",b)elseif c=="table"then a[d]=s(b,0)else a[d]=u(b)end end;return o(a,", ")end;local function n(a)if i then local a=i(a)local b={}if a.nparams then for a=1,a.nparams do b[a]=f("p%d",a)end;if a.isvararg then b[#b+1]="..."end end;return f("function (%s) --[[ Function Name: \"%s\" ]] end",o(b,", "),a.namewhat or a.name or"")end;return"function () end"end;local function i(a)local b=1;local c={}while b<=#a do local a=e(a,b,b)if a=="\n"then c[b]="\\n"elseif a=="\t"then c[b]="\\t"elseif a=="\""then c[b]="\\\""else local d=h(a)if d<32 or d>126 then c[b]=f("\\%d",d)else c[b]=a end end;b=b+1 end;return o(c)end;local function h(a)if a==j then return"math.huge"elseif a==-j then return"-math.huge"end;return u(a)end;local function j(b,e)local g=k(b)local j=b;if g=="string"then if c(b,"[^_%a%d]+")then j=f(a.highlighting and"\27[32m\"%s\"\27[0m"or"\"%s\"",i(b))else return b end elseif g=="table"then e=e+1;j=s(b,e)elseif g=="number"or g=="boolean"then if a.highlighting then j=f("\27[33m%s\27[0m",h(b))else j=h(b)end elseif g=="function"then j=n(b)elseif g=="Instance"then j=d(b)else j=u(b)end;return f("[%s]",j)end;s=function(b,c,m)m=m or{}if m[b]then return f("\"%s -- recursive table\"",u(b))end;m[b]=true;c=c or 0;local p={}local q=g(r,c)local g=g(r,c+1)local r=0;for b,e in l(b)do local l=r+1~=b;local b=f(l and"%s = "or"",j(b,c))local j=k(e)local k=#p+1;if j=="string"then p[k]=f(a.highlighting and"%s%s\27[32m\"%s\"\27[0m,\n"or"%s%s\"%s\",\n",g,b,i(e))elseif j=="number"or j=="boolean"then p[k]=f(a.highlighting and"%s%s\27[33m%s\27[0m,\n"or"%s%s%s,\n",g,b,h(e))elseif j=="table"then p[k]=f("%s%s%s,\n",g,b,s(e,c+1,m))elseif j=="userdata"then p[k]=f("%s%s newproxy(),\n",g,b)elseif j=="function"then p[k]=f("%s%s%s,\n",g,b,n(e))elseif j=="Instance"then p[k]=f("%s%s%s,\n",g,b,d(e))elseif t[j]then p[k]=f("%s%s%s.new(%s),\n",g,b,j,u(e))else p[k]=f("%s%s\"%s\",\n",g,b,u(e))end;r=r+1 end;local a=p[#p]if a then p[#p]=e(a,0,-3).."\n"end;if r>0 then if c<1 then return f("{\n%s}",o(p))else return f("{\n%s%s}",o(p),q)end else return"{}"end end;local c={}function c.Serialize(a)if k(a)~="table"then error("invalid argument #1 to 'Serialize' (table expected)")end;m(k(a)=="table","")return s(a)end;function c.FormatArguments(...)return b(...)end;function c.FormatString(a)if k(a)~="string"then error("invalid argument #1 to 'FormatString' (string expected)")end;return i(a)end;function c.UpdateConfig(b)m(k(b)=="table","invalid argument #1 to 'UpdateConfig' (table expected)")a.spaces=b.spaces or 4;a.highlighting=b.highlighting;r=g(" ",a.spaces or 4)end;return c
